unit TestserviceApiCep;
{

  Delphi DUnit Test Case
  ----------------------
  This unit contains a skeleton test case class generated by the Test Case Wizard.
  Modify the generated code to correctly setup and call the methods from the unit 
  being tested.

}

interface

uses
  System.Net.HttpClient, System.Generics.Collections,TestFramework,
  System.SysUtils, serviceApiCep, Dialogs, AddressClass, System.JSON;

type
  // Test methods for class TServiceApiCep

  TestTServiceApiCep = class(TTestCase)
  strict private
    FServiceApiCep: TServiceApiCep;
  public
    procedure SetUp; override;
    procedure TearDown; override;
  published
    procedure TestfetchCep;
  end;

implementation

procedure TestTServiceApiCep.SetUp;
begin
  FServiceApiCep := TServiceApiCep.Create;
end;

procedure TestTServiceApiCep.TearDown;
begin
  FServiceApiCep.Free;
  FServiceApiCep := nil;
end;

procedure TestTServiceApiCep.TestfetchCep;
var
  AddressObject: TAddressClass;
  ACep: string;

begin
  ACep:= '33902030';
  AddressObject := FServiceApiCep.fetchCep(ACep);

  CheckEquals(AddressObject.Cep, ACep, 'O CEP retornado não corresponde ao CEP consultado.');

  CheckTrue( Assigned(AddressObject), 'Nenhum Objeto Address retornado no teste');


end;

initialization
  // Register any test cases with the test runner
  RegisterTest(TestTServiceApiCep.Suite);
end.

